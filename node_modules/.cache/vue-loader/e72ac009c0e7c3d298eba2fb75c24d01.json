{"remainingRequest":"D:\\桌面\\项目\\weather-guide-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\项目\\weather-guide-main\\src\\views\\Home\\Home.vue?vue&type=style&index=0&id=6d720fe5&lang=scss&scoped=true&","dependencies":[{"path":"D:\\桌面\\项目\\weather-guide-main\\src\\views\\Home\\Home.vue","mtime":1652792544000},{"path":"D:\\桌面\\项目\\weather-guide-main\\node_modules\\css-loader\\dist\\cjs.js","mtime":1653630129567},{"path":"D:\\桌面\\项目\\weather-guide-main\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1653630131143},{"path":"D:\\桌面\\项目\\weather-guide-main\\node_modules\\postcss-loader\\src\\index.js","mtime":1653630129902},{"path":"D:\\桌面\\项目\\weather-guide-main\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1653630129369},{"path":"D:\\桌面\\项目\\weather-guide-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653630129371},{"path":"D:\\桌面\\项目\\weather-guide-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1653630131143}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ob21lIHsKICBAbWl4aW4geHkoJHRvcDogYXV0bywgJHJpZ2h0OiBhdXRvLCAkYm90dG9tOiBhdXRvLCAkbGVmdDogYXV0bykgewogICAgdG9wOiAkdG9wOwogICAgcmlnaHQ6ICRyaWdodDsKICAgIGJvdHRvbTogJGJvdHRvbTsKICAgIGxlZnQ6ICRsZWZ0OwogIH0KICBAbWl4aW4gd2goJHdpZCwgJGhlaSkgewogICAgd2lkdGg6ICR3aWQ7CiAgICBoZWlnaHQ6ICRoZWk7CiAgfQogIEBtaXhpbiBmb250KCRzaXplLCAkZnc6IGJvbGQsICRjb2xvcjogI2ZmZikgewogICAgZm9udC1zaXplOiAkc2l6ZTsKICAgIGZvbnQtd2VpZ2h0OiAkZnc7CiAgICBjb2xvcjogJGNvbG9yOwogIH0KICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbWluLWhlaWdodDogMTAwdmg7CiAgLy8gYmFja2dyb3VuZDogdXJsKCJ+Iik7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyOwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgLndlYXRoZXItYm94IHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHotaW5kZXg6IDk5OTsKICAgIEBpbmNsdWRlIHh5KDUlLCAiIiwgIiIsIDUwJSk7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAubm93LWNvbmQgewogICAgICBoMSB7CiAgICAgICAgQGluY2x1ZGUgZm9udCgyMHB4KTsKICAgICAgfQogICAgICAuYWRkcmVzcywKICAgICAgLnVwVGltZSB7CiAgICAgICAgQGluY2x1ZGUgZm9udCgyMHB4KTsKICAgICAgICB0ZXh0LXNoYWRvdzogNXB4IDVweCA1cHggIzAwMDsKICAgICAgfQogICAgICAuY29uZFR4dCB7CiAgICAgICAgQGluY2x1ZGUgZm9udCg4MHB4LCBib2xkZXIpOwogICAgICAgIHRleHQtc2hhZG93OiA1cHggNXB4IDVweCAjY2NjOwogICAgICB9CiAgICAgIC53aW5kLAogICAgICAudG1wIHsKICAgICAgICBAaW5jbHVkZSBmb250KDIwcHgsIGJvbGRlciwgI2ZmZik7CiAgICAgICAgdGV4dC1zaGFkb3c6IDJweCAycHggNXB4IHJnYigxNDQsIDE0OSwgMjE2KTsKICAgICAgfQogICAgfQogICAgLnRpcCB7CiAgICAgIGgxIHsKICAgICAgICBAaW5jbHVkZSBmb250KDUwcHgsIGJvbGRlcik7CiAgICAgICAgdGV4dC1zaGFkb3c6IDJweCAycHggNXB4IHJnYigxNDQsIDE0OSwgMjE2KTsKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/Home","sourcesContent":["<template>\n  <div class=\"home\" :style=\"{ backgroundImage: 'url(' + coverImgUrl + ')' }\">\n    <div class=\"weather-box\">\n      <el-cascader\n        size=\"medium\"\n        separator=\">\"\n        :options=\"options\"\n        placeholder=\"请选择 / 搜索城市\"\n        v-model=\"selectedOptions\"\n        :props=\"{ expandTrigger: 'hover' }\"\n        filterable\n        @change=\"selectCity\"\n      />\n      <div class=\"now-cond\" v-if=\"Object.keys(weathData).length\">\n        <p class=\"address\">\n          <i class=\"el-icon-place\" />{{ weathData.basic.city }}\n        </p>\n        <p class=\"upTime\">{{ weathData.basic.update.loc }}</p>\n        <i class=\"condTxt\">{{ weathData.now.cond.txt }}</i>\n        <p class=\"wind\">{{ weathData.now.wind.dir }}</p>\n        <p class=\"tmp\">\n          {{ weathData.daily_forecast[0].tmp.min }}℃~{{\n            weathData.daily_forecast[0].tmp.max\n          }}℃\n        </p>\n        <h1>未来3日天气预报</h1>\n        <el-table\n          :data=\"weathData.daily_forecast\"\n          border\n          style=\"width: 100%\"\n          stripe\n        >\n          <el-table-column label=\"日期\" width=\"180\">\n            <template slot-scope=\"scope\">\n              <i class=\"el-icon-time\"></i>\n              <span style=\"margin-left: 10px\">{{ scope.row.date }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"cond.txt_d\" label=\"天气\" />\n          <el-table-column prop=\"tmp.min\" label=\"最低温度(℃)\" width=\"120\" />\n          <el-table-column prop=\"tmp.max\" label=\"最高温度(℃)\" width=\"120\" />\n          <el-table-column prop=\"wind.dir\" label=\"风向\" />\n        </el-table>\n      </div>\n      <div class=\"tip\" v-else>\n        <h1>选择城市开始查询吧 !</h1>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//城市选择\nimport { regionData, CodeToText } from \"element-china-area-data\";\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      options: regionData,\n      selectedOptions: [],\n      addressAll: [],\n      address: \"\",\n      weathData: {},\n      coverImgUrl: require(\"@/assets/img/background.jpg\"),\n    };\n  },\n  methods: {\n    //选择地区\n    selectCity() {\n      this.addressAll = [];\n      this.selectedOptions.forEach((city) => {\n        this.addressAll.push(CodeToText[city]);\n      });\n      this.inquireWeather();\n    },\n    // 点击天气查询\n    async inquireWeather() {\n      if (this.addressAll[2] == \"市辖区\" || this.addressAll.length == 2) {\n        this.address = this.addressAll[1]; //如果选市辖区就定位到二级地址\n      } else {\n        this.address = this.addressAll[2]; //区域码所对应的属性值即中文地址\n      }\n      // 开始请求接口\n      const res1 = await this.$api.getCityWeather(this.address);\n      if (res1.status === \"ok\") {\n        //请求数据成功\n        this.$notify({\n          title: \"查询成功\",\n          type: \"success\",\n        });\n        this.weathData = res1;\n        this.weathData.daily_forecast.shift();\n        this.weathData.daily_forecast.splice(3, 3);\n        //无法找到该地\n      } else if (res1.status === \"unknown location\") {\n        // 1.只是无法获取到三级地址信息\n        // 重新请求上一级地址\n        this.address = this.addressAll[1];\n        const res2 = await this.$api.getCityWeather(this.address);\n        if (res2.status === \"ok\") {\n          this.$notify({\n            title: \"查询成功\",\n            type: \"success\",\n          });\n          this.weathData = res2;\n          this.weathData.daily_forecast.shift();\n          this.weathData.daily_forecast.splice(3, 3);\n        } else {\n          // 重新请求上一级地址\n          this.address = this.addressAll[0];\n          const res3 = await this.$api.getCityWeather(this.address);\n          if (res3.status === \"ok\") {\n            this.$notify({\n              title: \"查询成功\",\n              type: \"success\",\n            });\n            this.weathData = res3;\n            this.weathData.daily_forecast.shift();\n            this.weathData.daily_forecast.splice(3, 3);\n          } else {\n            // 2.彻底无法找到该地\n            this.$message({\n              message: \"抱歉，无法获取该地相关信息\",\n              type: \"error\",\n            });\n          }\n        }\n      }\n      // 背景图片切换\n      this.bgChange();\n    },\n    // 背景图片切换\n    bgChange() {\n      const weather = this.weathData.now.cond.txt;\n      this.coverImgUrl = require(`@/assets/img/${weather}.jpg`);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.home {\n  @mixin xy($top: auto, $right: auto, $bottom: auto, $left: auto) {\n    top: $top;\n    right: $right;\n    bottom: $bottom;\n    left: $left;\n  }\n  @mixin wh($wid, $hei) {\n    width: $wid;\n    height: $hei;\n  }\n  @mixin font($size, $fw: bold, $color: #fff) {\n    font-size: $size;\n    font-weight: $fw;\n    color: $color;\n  }\n  position: relative;\n  min-height: 100vh;\n  // background: url(\"~\");\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n  .weather-box {\n    position: absolute;\n    text-align: center;\n    z-index: 999;\n    @include xy(5%, \"\", \"\", 50%);\n    transform: translateX(-50%);\n    .now-cond {\n      h1 {\n        @include font(20px);\n      }\n      .address,\n      .upTime {\n        @include font(20px);\n        text-shadow: 5px 5px 5px #000;\n      }\n      .condTxt {\n        @include font(80px, bolder);\n        text-shadow: 5px 5px 5px #ccc;\n      }\n      .wind,\n      .tmp {\n        @include font(20px, bolder, #fff);\n        text-shadow: 2px 2px 5px rgb(144, 149, 216);\n      }\n    }\n    .tip {\n      h1 {\n        @include font(50px, bolder);\n        text-shadow: 2px 2px 5px rgb(144, 149, 216);\n      }\n    }\n  }\n}\n</style>\n"]}]}