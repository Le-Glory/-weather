{"remainingRequest":"D:\\桌面\\weather-guide-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\weather-guide-main\\src\\views\\Home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\weather-guide-main\\src\\views\\Home\\Home.vue","mtime":1652792544000},{"path":"D:\\桌面\\weather-guide-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653630129371},{"path":"D:\\桌面\\weather-guide-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1653630130486},{"path":"D:\\桌面\\weather-guide-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653630129371},{"path":"D:\\桌面\\weather-guide-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1653630131143}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8v5Z+O5biC6YCJ5oupCmltcG9ydCB7IHJlZ2lvbkRhdGEsIENvZGVUb1RleHQgfSBmcm9tICJlbGVtZW50LWNoaW5hLWFyZWEtZGF0YSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcHRpb25zOiByZWdpb25EYXRhLAogICAgICBzZWxlY3RlZE9wdGlvbnM6IFtdLAogICAgICBhZGRyZXNzQWxsOiBbXSwKICAgICAgYWRkcmVzczogIiIsCiAgICAgIHdlYXRoRGF0YToge30sCiAgICAgIGNvdmVySW1nVXJsOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvYmFja2dyb3VuZC5qcGciKSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+mAieaLqeWcsOWMugogICAgc2VsZWN0Q2l0eSgpIHsKICAgICAgdGhpcy5hZGRyZXNzQWxsID0gW107CiAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLmZvckVhY2goKGNpdHkpID0+IHsKICAgICAgICB0aGlzLmFkZHJlc3NBbGwucHVzaChDb2RlVG9UZXh0W2NpdHldKTsKICAgICAgfSk7CiAgICAgIHRoaXMuaW5xdWlyZVdlYXRoZXIoKTsKICAgIH0sCiAgICAvLyDngrnlh7vlpKnmsJTmn6Xor6IKICAgIGFzeW5jIGlucXVpcmVXZWF0aGVyKCkgewogICAgICBpZiAodGhpcy5hZGRyZXNzQWxsWzJdID09ICLluILovpbljLoiIHx8IHRoaXMuYWRkcmVzc0FsbC5sZW5ndGggPT0gMikgewogICAgICAgIHRoaXMuYWRkcmVzcyA9IHRoaXMuYWRkcmVzc0FsbFsxXTsgLy/lpoLmnpzpgInluILovpbljLrlsLHlrprkvY3liLDkuoznuqflnLDlnYAKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFkZHJlc3MgPSB0aGlzLmFkZHJlc3NBbGxbMl07IC8v5Yy65Z+f56CB5omA5a+55bqU55qE5bGe5oCn5YC85Y2z5Lit5paH5Zyw5Z2ACiAgICAgIH0KICAgICAgLy8g5byA5aeL6K+35rGC5o6l5Y+jCiAgICAgIGNvbnN0IHJlczEgPSBhd2FpdCB0aGlzLiRhcGkuZ2V0Q2l0eVdlYXRoZXIodGhpcy5hZGRyZXNzKTsKICAgICAgaWYgKHJlczEuc3RhdHVzID09PSAib2siKSB7CiAgICAgICAgLy/or7fmsYLmlbDmja7miJDlip8KICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICLmn6Xor6LmiJDlip8iLAogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgIH0pOwogICAgICAgIHRoaXMud2VhdGhEYXRhID0gcmVzMTsKICAgICAgICB0aGlzLndlYXRoRGF0YS5kYWlseV9mb3JlY2FzdC5zaGlmdCgpOwogICAgICAgIHRoaXMud2VhdGhEYXRhLmRhaWx5X2ZvcmVjYXN0LnNwbGljZSgzLCAzKTsKICAgICAgICAvL+aXoOazleaJvuWIsOivpeWcsAogICAgICB9IGVsc2UgaWYgKHJlczEuc3RhdHVzID09PSAidW5rbm93biBsb2NhdGlvbiIpIHsKICAgICAgICAvLyAxLuWPquaYr+aXoOazleiOt+WPluWIsOS4iee6p+WcsOWdgOS/oeaBrwogICAgICAgIC8vIOmHjeaWsOivt+axguS4iuS4gOe6p+WcsOWdgAogICAgICAgIHRoaXMuYWRkcmVzcyA9IHRoaXMuYWRkcmVzc0FsbFsxXTsKICAgICAgICBjb25zdCByZXMyID0gYXdhaXQgdGhpcy4kYXBpLmdldENpdHlXZWF0aGVyKHRoaXMuYWRkcmVzcyk7CiAgICAgICAgaWYgKHJlczIuc3RhdHVzID09PSAib2siKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogIuafpeivouaIkOWKnyIsCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy53ZWF0aERhdGEgPSByZXMyOwogICAgICAgICAgdGhpcy53ZWF0aERhdGEuZGFpbHlfZm9yZWNhc3Quc2hpZnQoKTsKICAgICAgICAgIHRoaXMud2VhdGhEYXRhLmRhaWx5X2ZvcmVjYXN0LnNwbGljZSgzLCAzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g6YeN5paw6K+35rGC5LiK5LiA57qn5Zyw5Z2ACiAgICAgICAgICB0aGlzLmFkZHJlc3MgPSB0aGlzLmFkZHJlc3NBbGxbMF07CiAgICAgICAgICBjb25zdCByZXMzID0gYXdhaXQgdGhpcy4kYXBpLmdldENpdHlXZWF0aGVyKHRoaXMuYWRkcmVzcyk7CiAgICAgICAgICBpZiAocmVzMy5zdGF0dXMgPT09ICJvayIpIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogIuafpeivouaIkOWKnyIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy53ZWF0aERhdGEgPSByZXMzOwogICAgICAgICAgICB0aGlzLndlYXRoRGF0YS5kYWlseV9mb3JlY2FzdC5zaGlmdCgpOwogICAgICAgICAgICB0aGlzLndlYXRoRGF0YS5kYWlseV9mb3JlY2FzdC5zcGxpY2UoMywgMyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyAyLuW9u+W6leaXoOazleaJvuWIsOivpeWcsAogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAi5oqx5q2J77yM5peg5rOV6I635Y+W6K+l5Zyw55u45YWz5L+h5oGvIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLy8g6IOM5pmv5Zu+54mH5YiH5o2iCiAgICAgIHRoaXMuYmdDaGFuZ2UoKTsKICAgIH0sCiAgICAvLyDog4zmma/lm77niYfliIfmjaIKICAgIGJnQ2hhbmdlKCkgewogICAgICBjb25zdCB3ZWF0aGVyID0gdGhpcy53ZWF0aERhdGEubm93LmNvbmQudHh0OwogICAgICB0aGlzLmNvdmVySW1nVXJsID0gcmVxdWlyZShgQC9hc3NldHMvaW1nLyR7d2VhdGhlcn0uanBnYCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/Home","sourcesContent":["<template>\n  <div class=\"home\" :style=\"{ backgroundImage: 'url(' + coverImgUrl + ')' }\">\n    <div class=\"weather-box\">\n      <el-cascader\n        size=\"medium\"\n        separator=\">\"\n        :options=\"options\"\n        placeholder=\"请选择 / 搜索城市\"\n        v-model=\"selectedOptions\"\n        :props=\"{ expandTrigger: 'hover' }\"\n        filterable\n        @change=\"selectCity\"\n      />\n      <div class=\"now-cond\" v-if=\"Object.keys(weathData).length\">\n        <p class=\"address\">\n          <i class=\"el-icon-place\" />{{ weathData.basic.city }}\n        </p>\n        <p class=\"upTime\">{{ weathData.basic.update.loc }}</p>\n        <i class=\"condTxt\">{{ weathData.now.cond.txt }}</i>\n        <p class=\"wind\">{{ weathData.now.wind.dir }}</p>\n        <p class=\"tmp\">\n          {{ weathData.daily_forecast[0].tmp.min }}℃~{{\n            weathData.daily_forecast[0].tmp.max\n          }}℃\n        </p>\n        <h1>未来3日天气预报</h1>\n        <el-table\n          :data=\"weathData.daily_forecast\"\n          border\n          style=\"width: 100%\"\n          stripe\n        >\n          <el-table-column label=\"日期\" width=\"180\">\n            <template slot-scope=\"scope\">\n              <i class=\"el-icon-time\"></i>\n              <span style=\"margin-left: 10px\">{{ scope.row.date }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"cond.txt_d\" label=\"天气\" />\n          <el-table-column prop=\"tmp.min\" label=\"最低温度(℃)\" width=\"120\" />\n          <el-table-column prop=\"tmp.max\" label=\"最高温度(℃)\" width=\"120\" />\n          <el-table-column prop=\"wind.dir\" label=\"风向\" />\n        </el-table>\n      </div>\n      <div class=\"tip\" v-else>\n        <h1>选择城市开始查询吧 !</h1>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//城市选择\nimport { regionData, CodeToText } from \"element-china-area-data\";\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      options: regionData,\n      selectedOptions: [],\n      addressAll: [],\n      address: \"\",\n      weathData: {},\n      coverImgUrl: require(\"@/assets/img/background.jpg\"),\n    };\n  },\n  methods: {\n    //选择地区\n    selectCity() {\n      this.addressAll = [];\n      this.selectedOptions.forEach((city) => {\n        this.addressAll.push(CodeToText[city]);\n      });\n      this.inquireWeather();\n    },\n    // 点击天气查询\n    async inquireWeather() {\n      if (this.addressAll[2] == \"市辖区\" || this.addressAll.length == 2) {\n        this.address = this.addressAll[1]; //如果选市辖区就定位到二级地址\n      } else {\n        this.address = this.addressAll[2]; //区域码所对应的属性值即中文地址\n      }\n      // 开始请求接口\n      const res1 = await this.$api.getCityWeather(this.address);\n      if (res1.status === \"ok\") {\n        //请求数据成功\n        this.$notify({\n          title: \"查询成功\",\n          type: \"success\",\n        });\n        this.weathData = res1;\n        this.weathData.daily_forecast.shift();\n        this.weathData.daily_forecast.splice(3, 3);\n        //无法找到该地\n      } else if (res1.status === \"unknown location\") {\n        // 1.只是无法获取到三级地址信息\n        // 重新请求上一级地址\n        this.address = this.addressAll[1];\n        const res2 = await this.$api.getCityWeather(this.address);\n        if (res2.status === \"ok\") {\n          this.$notify({\n            title: \"查询成功\",\n            type: \"success\",\n          });\n          this.weathData = res2;\n          this.weathData.daily_forecast.shift();\n          this.weathData.daily_forecast.splice(3, 3);\n        } else {\n          // 重新请求上一级地址\n          this.address = this.addressAll[0];\n          const res3 = await this.$api.getCityWeather(this.address);\n          if (res3.status === \"ok\") {\n            this.$notify({\n              title: \"查询成功\",\n              type: \"success\",\n            });\n            this.weathData = res3;\n            this.weathData.daily_forecast.shift();\n            this.weathData.daily_forecast.splice(3, 3);\n          } else {\n            // 2.彻底无法找到该地\n            this.$message({\n              message: \"抱歉，无法获取该地相关信息\",\n              type: \"error\",\n            });\n          }\n        }\n      }\n      // 背景图片切换\n      this.bgChange();\n    },\n    // 背景图片切换\n    bgChange() {\n      const weather = this.weathData.now.cond.txt;\n      this.coverImgUrl = require(`@/assets/img/${weather}.jpg`);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.home {\n  @mixin xy($top: auto, $right: auto, $bottom: auto, $left: auto) {\n    top: $top;\n    right: $right;\n    bottom: $bottom;\n    left: $left;\n  }\n  @mixin wh($wid, $hei) {\n    width: $wid;\n    height: $hei;\n  }\n  @mixin font($size, $fw: bold, $color: #fff) {\n    font-size: $size;\n    font-weight: $fw;\n    color: $color;\n  }\n  position: relative;\n  min-height: 100vh;\n  // background: url(\"~\");\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n  .weather-box {\n    position: absolute;\n    text-align: center;\n    z-index: 999;\n    @include xy(5%, \"\", \"\", 50%);\n    transform: translateX(-50%);\n    .now-cond {\n      h1 {\n        @include font(20px);\n      }\n      .address,\n      .upTime {\n        @include font(20px);\n        text-shadow: 5px 5px 5px #000;\n      }\n      .condTxt {\n        @include font(80px, bolder);\n        text-shadow: 5px 5px 5px #ccc;\n      }\n      .wind,\n      .tmp {\n        @include font(20px, bolder, #fff);\n        text-shadow: 2px 2px 5px rgb(144, 149, 216);\n      }\n    }\n    .tip {\n      h1 {\n        @include font(50px, bolder);\n        text-shadow: 2px 2px 5px rgb(144, 149, 216);\n      }\n    }\n  }\n}\n</style>\n"]}]}